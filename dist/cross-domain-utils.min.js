!function(n,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("crossDomainUtils",[],r):"object"==typeof exports?exports.crossDomainUtils=r():n.crossDomainUtils=r()}("undefined"!=typeof self?self:this,(function(){return function(n){var r={};function t(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return n[e].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=n,t.c=r,t.d=function(n,r,e){t.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:e})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,r){if(1&r&&(n=t(n)),8&r)return n;if(4&r&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(t.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&r&&"string"!=typeof n)for(var o in n)t.d(e,o,function(r){return n[r]}.bind(null,o));return e},t.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(r,"a",r),r},t.o=function(n,r){return{}.hasOwnProperty.call(n,r)},t.p="",t(t.s=0)}([function(n,r,t){"use strict";function e(n){return"[object RegExp]"==={}.toString.call(n)}t.r(r),t.d(r,"isFileProtocol",(function(){return f})),t.d(r,"isAboutProtocol",(function(){return a})),t.d(r,"getParent",(function(){return d})),t.d(r,"getOpener",(function(){return s})),t.d(r,"canReadFromWindow",(function(){return l})),t.d(r,"getActualDomain",(function(){return w})),t.d(r,"getDomain",(function(){return m})),t.d(r,"isBlankDomain",(function(){return p})),t.d(r,"isActuallySameDomain",(function(){return v})),t.d(r,"isSameDomain",(function(){return h})),t.d(r,"assertSameDomain",(function(){return y})),t.d(r,"getParents",(function(){return g})),t.d(r,"isAncestorParent",(function(){return O})),t.d(r,"getFrames",(function(){return A})),t.d(r,"getAllChildFrames",(function(){return b})),t.d(r,"getTop",(function(){return D})),t.d(r,"getNextOpener",(function(){return P})),t.d(r,"getUltimateTop",(function(){return W})),t.d(r,"getAllFramesInWindow",(function(){return F})),t.d(r,"getAllWindows",(function(){return x})),t.d(r,"isTop",(function(){return E})),t.d(r,"isFrameWindowClosed",(function(){return _})),t.d(r,"isWindowClosed",(function(){return C})),t.d(r,"linkFrameWindow",(function(){return j})),t.d(r,"getUserAgent",(function(){return k})),t.d(r,"getFrameByName",(function(){return B})),t.d(r,"findChildFrameByName",(function(){return N})),t.d(r,"findFrameByName",(function(){return U})),t.d(r,"isParent",(function(){return M})),t.d(r,"isOpener",(function(){return I})),t.d(r,"getAncestor",(function(){return L})),t.d(r,"getAncestors",(function(){return R})),t.d(r,"isAncestor",(function(){return K})),t.d(r,"isPopup",(function(){return J})),t.d(r,"isIframe",(function(){return Y})),t.d(r,"isFullpage",(function(){return q})),t.d(r,"getDistanceFromTop",(function(){return G})),t.d(r,"getNthParent",(function(){return H})),t.d(r,"getNthParentFromTop",(function(){return Q})),t.d(r,"isSameTopWindow",(function(){return V})),t.d(r,"matchDomain",(function(){return X})),t.d(r,"stringifyDomainPattern",(function(){return Z})),t.d(r,"getDomainFromUrl",(function(){return $})),t.d(r,"onCloseWindow",(function(){return nn})),t.d(r,"isWindow",(function(){return rn})),t.d(r,"isBrowser",(function(){return tn})),t.d(r,"isCurrentDomain",(function(){return en})),t.d(r,"isMockDomain",(function(){return on})),t.d(r,"normalizeMockUrl",(function(){return un})),t.d(r,"closeWindow",(function(){return cn})),t.d(r,"getFrameForWindow",(function(){return fn})),t.d(r,"TYPES",(function(){return an})),t.d(r,"PROTOCOL",(function(){return o})),t.d(r,"WILDCARD",(function(){return i})),t.d(r,"WINDOW_TYPE",(function(){return u}));var o={MOCK:"mock:",FILE:"file:",ABOUT:"about:"},i="*",u={IFRAME:"iframe",POPUP:"popup"},c="Call was rejected by callee.\r\n";function f(n){return void 0===n&&(n=window),n.location.protocol===o.FILE}function a(n){return void 0===n&&(n=window),n.location.protocol===o.ABOUT}function d(n){if(void 0===n&&(n=window),n)try{if(n.parent&&n.parent!==n)return n.parent}catch(n){}}function s(n){if(void 0===n&&(n=window),n&&!d(n))try{return n.opener}catch(n){}}function l(n){try{return!0}catch(n){}return!1}function w(n){void 0===n&&(n=window);var r=n.location;if(!r)throw new Error("Can not read window location");var t=r.protocol;if(!t)throw new Error("Can not read window protocol");if(t===o.FILE)return o.FILE+"//";if(t===o.ABOUT){var e=d(n);return e&&l()?w(e):o.ABOUT+"//"}var i=r.host;if(!i)throw new Error("Can not read window host");return t+"//"+i}function m(n){void 0===n&&(n=window);var r=w(n);return r&&n.mockDomain&&0===n.mockDomain.indexOf(o.MOCK)?n.mockDomain:r}function p(n){try{if(!n.location.href)return!0;if("about:blank"===n.location.href)return!0}catch(n){}return!1}function v(n){try{if(n===window)return!0}catch(n){}try{var r=Object.getOwnPropertyDescriptor(n,"location");if(r&&!1===r.enumerable)return!1}catch(n){}try{if(a(n)&&l())return!0}catch(n){}try{if(w(n)===w(window))return!0}catch(n){}return!1}function h(n){if(!v(n))return!1;try{if(n===window)return!0;if(a(n)&&l())return!0;if(m(window)===m(n))return!0}catch(n){}return!1}function y(n){if(!h(n))throw new Error("Expected window to be same domain");return n}function g(n){var r=[];try{for(;n.parent!==n;)r.push(n.parent),n=n.parent}catch(n){}return r}function O(n,r){if(!n||!r)return!1;var t=d(r);return t?t===n:-1!==g(r).indexOf(n)}function A(n){var r,t,e=[];try{r=n.frames}catch(t){r=n}try{t=r.length}catch(n){}if(0===t)return e;if(t){for(var o=0;o<t;o++){var i=void 0;try{i=r[o]}catch(n){continue}e.push(i)}return e}for(var u=0;u<100;u++){var c=void 0;try{c=r[u]}catch(n){return e}if(!c)return e;e.push(c)}return e}function b(n){for(var r=[],t=0,e=A(n);t<e.length;t++){var o=e[t];r.push(o);for(var i=0,u=b(o);i<u.length;i++)r.push(u[i])}return r}function D(n){void 0===n&&(n=window);try{if(n.top)return n.top}catch(n){}if(d(n)===n)return n;try{if(O(window,n)&&window.top)return window.top}catch(n){}try{if(O(n,window)&&window.top)return window.top}catch(n){}for(var r=0,t=b(n);r<t.length;r++){var e=t[r];try{if(e.top)return e.top}catch(n){}if(d(e)===e)return e}}function P(n){return void 0===n&&(n=window),s(D(n)||n)}function W(n){void 0===n&&(n=window);var r=P(n);return r?W(r):top}function F(n){var r=D(n);if(!r)throw new Error("Can not determine top window");var t=[].concat(b(r),[r]);return-1===t.indexOf(n)&&(t=[].concat(t,[n],b(n))),t}function x(n){void 0===n&&(n=window);var r=F(n),t=P(n);return t?[].concat(x(t),r):r}function E(n){return n===D(n)}function _(n){if(!n.contentWindow)return!0;if(!n.parentNode)return!0;var r=n.ownerDocument;if(r&&r.documentElement&&!r.documentElement.contains(n)){for(var t=n;t.parentNode&&t.parentNode!==t;)t=t.parentNode;if(!t.host||!r.documentElement.contains(t.host))return!0}return!1}var S=[],T=[];function C(n,r){void 0===r&&(r=!0);try{if(n===window)return!1}catch(n){return!0}try{if(!n)return!0}catch(n){return!0}try{if(n.closed)return!0}catch(n){return!n||n.message!==c}if(r&&h(n))try{if(n.mockclosed)return!0}catch(n){}try{if(!n.parent||!n.top)return!0}catch(n){}var t=function(n,r){for(var t=0;t<n.length;t++)try{if(n[t]===r)return t}catch(n){}return-1}(S,n);if(-1!==t){var e=T[t];if(e&&_(e))return!0}return!1}function j(n){if(function(){for(var n=0;n<S.length;n++){var r=!1;try{r=S[n].closed}catch(n){}r&&(T.splice(n,1),S.splice(n,1))}}(),n&&n.contentWindow)try{S.push(n.contentWindow),T.push(n)}catch(n){}}function k(n){return(n=n||window).navigator.mockUserAgent||n.navigator.userAgent}function B(n,r){for(var t=A(n),e=0;e<t.length;e++){var o=t[e];try{if(h(o)&&o.name===r&&-1!==t.indexOf(o))return o}catch(n){}}try{if(-1!==t.indexOf(n.frames[r]))return n.frames[r]}catch(n){}try{if(-1!==t.indexOf(n[r]))return n[r]}catch(n){}}function N(n,r){var t=B(n,r);if(t)return t;for(var e=0,o=A(n);e<o.length;e++){var i=N(o[e],r);if(i)return i}}function U(n,r){return B(n,r)||N(D(n)||n,r)}function M(n,r){var t=d(r);if(t)return t===n;for(var e=0,o=A(n);e<o.length;e++)if(o[e]===r)return!0;return!1}function I(n,r){return n===s(r)}function L(n){return void 0===n&&(n=window),s(n=n||window)||d(n)||void 0}function R(n){for(var r=[],t=n;t;)(t=L(t))&&r.push(t);return r}function K(n,r){var t=L(r);if(t)return t===n;if(r===n)return!1;if(D(r)===r)return!1;for(var e=0,o=A(n);e<o.length;e++)if(o[e]===r)return!0;return!1}function J(n){return void 0===n&&(n=window),Boolean(s(n))}function Y(n){return void 0===n&&(n=window),Boolean(d(n))}function q(n){return void 0===n&&(n=window),Boolean(!Y(n)&&!J(n))}function z(n,r){for(var t=0;t<n.length;t++)for(var e=n[t],o=0;o<r.length;o++)if(e===r[o])return!0;return!1}function G(n){void 0===n&&(n=window);for(var r=0,t=n;t;)(t=d(t))&&(r+=1);return r}function H(n,r){void 0===r&&(r=1);for(var t=n,e=0;e<r;e++){if(!t)return;t=d(t)}return t}function Q(n,r){return void 0===r&&(r=1),H(n,G(n)-r)}function V(n,r){var t=D(n)||n,e=D(r)||r;try{if(t&&e)return t===e}catch(n){}var o=F(n),i=F(r);if(z(o,i))return!0;var u=s(t),c=s(e);return u&&z(F(u),i)||c&&z(F(c),o),!1}function X(n,r){if("string"==typeof n){if("string"==typeof r)return n===i||r===n;if(e(r))return!1;if(Array.isArray(r))return!1}return e(n)?e(r)?n.toString()===r.toString():!Array.isArray(r)&&Boolean(r.match(n)):!!Array.isArray(n)&&(Array.isArray(r)?JSON.stringify(n)===JSON.stringify(r):!e(r)&&n.some((function(n){return X(n,r)})))}function Z(n){return Array.isArray(n)?"("+n.join(" | ")+")":e(n)?"RegExp("+n.toString()+")":n.toString()}function $(n){return n.match(/^(https?|mock|file):\/\//)?n.split("/").slice(0,3).join("/"):m()}function nn(n,r,t,e){var o;return void 0===t&&(t=1e3),void 0===e&&(e=1/0),function i(){if(C(n))return o&&clearTimeout(o),r();e<=0?clearTimeout(o):(e-=t,o=setTimeout(i,t))}(),{cancel:function(){o&&clearTimeout(o)}}}function rn(n){try{if(n===window)return!0}catch(n){if(n&&n.message===c)return!0}try{if("[object Window]"==={}.toString.call(n))return!0}catch(n){if(n&&n.message===c)return!0}try{if(window.Window&&n instanceof window.Window)return!0}catch(n){if(n&&n.message===c)return!0}try{if(n&&n.self===n)return!0}catch(n){if(n&&n.message===c)return!0}try{if(n&&n.parent===n)return!0}catch(n){if(n&&n.message===c)return!0}try{if(n&&n.top===n)return!0}catch(n){if(n&&n.message===c)return!0}try{if(n&&"__unlikely_value__"===n.__cross_domain_utils_window_check__)return!1}catch(n){return!0}try{if("postMessage"in n&&"self"in n&&"location"in n)return!0}catch(n){}return!1}function tn(){return"undefined"!=typeof window&&void 0!==window.location}function en(n){return!!tn()&&m()===n}function on(n){return 0===n.indexOf(o.MOCK)}function un(n){if(!on($(n)))return n;throw new Error("Mock urls not supported out of test mode")}function cn(n){try{n.close()}catch(n){}}function fn(n){if(h(n))return y(n).frameElement;for(var r=0,t=document.querySelectorAll("iframe");r<t.length;r++){var e=t[r];if(e&&e.contentWindow&&e.contentWindow===n)return e}}var an=!0}])}));
//# sourceMappingURL=cross-domain-utils.min.js.map