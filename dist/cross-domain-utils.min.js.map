{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 7da027cfe240485c55ef","webpack:///./src/util.js","webpack:///./src/constants.js","webpack:///./src/utils.js","webpack:///./src/index.js","webpack:///./src/types.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","isRegex","item","toString","PROTOCOL","MOCK","FILE","ABOUT","WILDCARD","WINDOW_TYPE","IFRAME","POPUP","IE_WIN_ACCESS_ERROR","isFileProtocol","arguments","length","undefined","window","location","protocol","isAboutProtocol","getParent","win","parent","err","getOpener","opener","canReadFromWindow","href","getActualDomain","Error","host","getDomain","domain","mockDomain","indexOf","isBlankDomain","isActuallySameDomain","desc","getOwnPropertyDescriptor","isSameDomain","assertSameDomain","getParents","result","push","isAncestorParent","child","childParent","getFrames","frames","len","frame","getAllChildFrames","_i3","_getFrames2","_length2","_i5","_getAllChildFrames2","_length4","childFrame","getTop","top","_i7","_getAllChildFrames4","_length6","getNextOpener","getUltimateTop","getAllFramesInWindow","getAllWindows","concat","isTop","isFrameWindowClosed","contentWindow","parentNode","doc","ownerDocument","documentElement","contains","iframeWindows","iframeFrames","isWindowClosed","allowMock","closed","message","mockclosed","iframeIndex","collection","safeIndexOf","linkFrameWindow","splice","cleanIframes","getUserAgent","navigator","mockUserAgent","userAgent","getFrameByName","winFrames","_i9","_length8","findChildFrameByName","_i11","_getFrames4","_length10","namedFrame","findFrameByName","isParent","frameParent","_i13","_getFrames6","_length12","isOpener","getAncestor","getAncestors","results","ancestor","isAncestor","actualParent","_i15","_getFrames8","_length14","isPopup","Boolean","isIframe","isFullpage","anyMatch","collection1","collection2","_i17","_length16","item1","_i19","_length18","getDistanceFromTop","distance","getNthParent","getNthParentFromTop","isSameTopWindow","win1","win2","top1","top2","allFrames1","allFrames2","opener1","opener2","matchDomain","pattern","origin","Array","isArray","match","JSON","stringify","some","subpattern","stringifyDomainPattern","join","getDomainFromUrl","url","split","slice","onCloseWindow","callback","delay","maxtime","Infinity","timeout","check","clearTimeout","setTimeout","cancel","isWindow","obj","Window","__cross_domain_utils_window_check__","isBrowser","isCurrentDomain","isMockDomain","normalizeMockUrl","closeWindow","close","getFrameForWindow","frameElement","_i21","_document$querySelect2","document","querySelectorAll","_length20","__webpack_exports__"],"mappings":"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","file":"cross-domain-utils.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"crossDomainUtils\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"crossDomainUtils\"] = factory();\n\telse\n\t\troot[\"crossDomainUtils\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7da027cfe240485c55ef","/* @flow */\n\nexport function isRegex(item : mixed) : boolean {\n    return Object.prototype.toString.call(item) === '[object RegExp]';\n}\n\n// eslint-disable-next-line no-unused-vars\nexport function noop(...args : Array<mixed>) {\n    // pass\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util.js","/* @flow */\n\nexport const PROTOCOL = {\n    MOCK:  ('mock:' : 'mock:'),\n    FILE:  ('file:' : 'file:'),\n    ABOUT: ('about:' : 'about:')\n};\n\nexport const WILDCARD = '*';\n\nexport const WINDOW_TYPE = {\n    IFRAME: ('iframe' : 'iframe'),\n    POPUP:  ('popup' : 'popup')\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants.js","/* @flow */\n/* eslint max-lines: 0 */\n\nimport { isRegex, noop } from './util';\nimport type { CrossDomainWindowType, SameDomainWindowType, DomainMatcher } from './types';\nimport { PROTOCOL, WILDCARD } from './constants';\n\nlet IE_WIN_ACCESS_ERROR = 'Call was rejected by callee.\\r\\n';\n\nexport function isFileProtocol(win : SameDomainWindowType = window) : boolean {\n    return win.location.protocol === PROTOCOL.FILE;\n}\n\nexport function isAboutProtocol(win : SameDomainWindowType = window) : boolean {\n    return win.location.protocol === PROTOCOL.ABOUT;\n}\n\nexport function getParent(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n\n    if (!win) {\n        return;\n    }\n\n    try {\n        if (win.parent && win.parent !== win) {\n            return win.parent;\n        }\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function getOpener(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n\n    if (!win) {\n        return;\n    }\n\n    // Make sure we're not actually an iframe which has had window.open() called on us\n    if (getParent(win)) {\n        return;\n    }\n\n    try {\n        return win.opener;\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function canReadFromWindow(win : CrossDomainWindowType | SameDomainWindowType) : boolean {\n    try {\n        // $FlowFixMe\n        noop(win && win.location && win.location.href);\n        return true;\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function getActualDomain(win? : SameDomainWindowType = window) : string {\n\n    let location = win.location;\n\n    if (!location) {\n        throw new Error(`Can not read window location`);\n    }\n\n    let protocol = location.protocol;\n\n    if (!protocol) {\n        throw new Error(`Can not read window protocol`);\n    }\n\n    if (protocol === PROTOCOL.FILE) {\n        return `${ PROTOCOL.FILE }//`;\n    }\n\n    if (protocol === PROTOCOL.ABOUT) {\n\n        let parent = getParent(win);\n        if (parent && canReadFromWindow(parent)) {\n            // $FlowFixMe\n            return getActualDomain(parent);\n        }\n\n        return `${ PROTOCOL.ABOUT }//`;\n    }\n\n    let host = location.host;\n\n    if (!host) {\n        throw new Error(`Can not read window host`);\n    }\n\n    return `${ protocol }//${ host }`;\n}\n\nexport function getDomain(win? : SameDomainWindowType = window) : string {\n\n    let domain = getActualDomain(win);\n\n    if (domain && win.mockDomain && win.mockDomain.indexOf(PROTOCOL.MOCK) === 0) {\n        return win.mockDomain;\n    }\n\n    return domain;\n}\n\nexport function isBlankDomain(win : CrossDomainWindowType) : boolean {\n    try {\n        // $FlowFixMe\n        if (!win.location.href) {\n            return true;\n        }\n\n        if (win.location.href === 'about:blank') {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function isActuallySameDomain(win : CrossDomainWindowType) : boolean {\n\n    try {\n        if (win === window) {\n            return true;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        let desc = Object.getOwnPropertyDescriptor(win, 'location');\n\n        if (desc && desc.enumerable === false) {\n            return false;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        // $FlowFixMe\n        if (isAboutProtocol(win) && canReadFromWindow(win)) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        // $FlowFixMe\n        if (getActualDomain(win) === getActualDomain(window)) {\n            return true;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\nexport function isSameDomain(win : CrossDomainWindowType | SameDomainWindowType) : boolean {\n\n    if (!isActuallySameDomain(win)) {\n        return false;\n    }\n\n    try {\n\n        if (win === window) {\n            return true;\n        }\n\n        // $FlowFixMe\n        if (isAboutProtocol(win) && canReadFromWindow(win)) {\n            return true;\n        }\n\n        // $FlowFixMe\n        if (getDomain(window) === getDomain(win)) {\n            return true;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return false;\n}\n\n\nexport function assertSameDomain(win : CrossDomainWindowType | SameDomainWindowType) : SameDomainWindowType {\n    if (!isSameDomain(win)) {\n        throw new Error(`Expected window to be same domain`);\n    }\n\n    // $FlowFixMe\n    return win;\n}\n\nexport function getParents(win : CrossDomainWindowType) : Array<CrossDomainWindowType> {\n\n    let result = [];\n\n    try {\n\n        while (win.parent !== win) {\n            result.push(win.parent);\n            win = win.parent;\n        }\n\n    } catch (err) {\n        // pass\n    }\n\n    return result;\n}\n\nexport function isAncestorParent(parent : CrossDomainWindowType, child : CrossDomainWindowType) : boolean {\n\n    if (!parent || !child) {\n        return false;\n    }\n\n    let childParent = getParent(child);\n\n    if (childParent) {\n        return childParent === parent;\n    }\n\n    if (getParents(child).indexOf(parent) !== -1) {\n        return true;\n    }\n\n    return false;\n}\n\nexport function getFrames(win : CrossDomainWindowType) : Array<CrossDomainWindowType> {\n\n    let result = [];\n\n    let frames;\n\n    try {\n        frames = win.frames;\n    } catch (err) {\n        frames = win;\n    }\n\n    let len;\n\n    try {\n        len = frames.length;\n    } catch (err) {\n        // pass\n    }\n\n    if (len === 0) {\n        return result;\n    }\n\n    if (len) {\n        for (let i = 0; i < len; i++) {\n\n            let frame;\n\n            try {\n                frame = frames[i];\n            } catch (err) {\n                continue;\n            }\n\n            result.push(frame);\n        }\n\n        return result;\n    }\n\n    for (let i = 0; i < 100; i++) {\n        let frame;\n\n        try {\n            frame = frames[i];\n        } catch (err) {\n            return result;\n        }\n\n        if (!frame) {\n            return result;\n        }\n\n        result.push(frame);\n    }\n\n    return result;\n}\n\n\nexport function getAllChildFrames(win : CrossDomainWindowType) : Array<CrossDomainWindowType> {\n\n    let result = [];\n\n    for (let frame of getFrames(win)) {\n        result.push(frame);\n\n        for (let childFrame of getAllChildFrames(frame)) {\n            result.push(childFrame);\n        }\n    }\n\n    return result;\n}\n\nexport function getTop(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n\n    try {\n        if (win.top) {\n            return win.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    if (getParent(win) === win) {\n        return win;\n    }\n\n    try {\n        if (isAncestorParent(window, win) && window.top) {\n            return window.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (isAncestorParent(win, window) && window.top) {\n            return window.top;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    for (let frame of getAllChildFrames(win)) {\n        try {\n            if (frame.top) {\n                return frame.top;\n            }\n        } catch (err) {\n            // pass\n        }\n\n        if (getParent(frame) === frame) {\n            return frame;\n        }\n    }\n}\n\nexport function getNextOpener(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n    return getOpener(getTop(win) || win);\n}\n\nexport function getUltimateTop(win? : CrossDomainWindowType = window) : CrossDomainWindowType {\n    let opener = getNextOpener(win);\n\n    if (opener) {\n        return getUltimateTop(opener);\n    }\n\n    return top;\n}\n\nexport function getAllFramesInWindow(win : CrossDomainWindowType) : $ReadOnlyArray<CrossDomainWindowType> {\n    let top = getTop(win);\n\n    if (!top) {\n        throw new Error(`Can not determine top window`);\n    }\n\n    let result = [ ...getAllChildFrames(top), top ];\n\n    // Win may be in shadow dom\n    if (result.indexOf(win) === -1) {\n        result = [ ...result, win, ...getAllChildFrames(win) ];\n    }\n\n    return result;\n}\n\nexport function getAllWindows(win? : CrossDomainWindowType = window) : $ReadOnlyArray<CrossDomainWindowType> {\n    let frames = getAllFramesInWindow(win);\n    let opener = getNextOpener(win);\n\n    if (opener) {\n        return [ ...getAllWindows(opener), ...frames ];\n    } else {\n        return frames;\n    }\n}\n\nexport function isTop(win : CrossDomainWindowType) : boolean {\n    return win === getTop(win);\n}\n\nexport function isFrameWindowClosed(frame : HTMLIFrameElement) : boolean {\n\n    if (!frame.contentWindow) {\n        return true;\n    }\n\n    if (!frame.parentNode) {\n        return true;\n    }\n\n    let doc = frame.ownerDocument;\n\n    if (doc && doc.documentElement && !doc.documentElement.contains(frame)) {\n        let parent = frame;\n\n        while (parent.parentNode && parent.parentNode !== parent) {\n            parent = parent.parentNode;\n        }\n\n        // $FlowFixMe\n        if (!parent.host || !doc.documentElement.contains(parent.host)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction safeIndexOf<T>(collection : Array<T>, item : T) : number {\n    for (let i = 0; i < collection.length; i++) {\n\n        try {\n            if (collection[i] === item) {\n                return i;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    return -1;\n}\n\nlet iframeWindows = [];\nlet iframeFrames = [];\n\nexport function isWindowClosed(win : CrossDomainWindowType, allowMock : boolean = true) : boolean {\n\n    try {\n        if (win === window) {\n            return false;\n        }\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (!win) {\n            return true;\n        }\n\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (win.closed) {\n            return true;\n        }\n\n    } catch (err) {\n\n        // I love you so much IE\n\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return false;\n        }\n\n        return true;\n    }\n\n\n    if (allowMock && isSameDomain(win)) {\n        try {\n            // $FlowFixMe\n            if (win.mockclosed) {\n                return true;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    // Mobile safari\n\n    try {\n        if (!win.parent || !win.top) {\n            return true;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    // Yes, this actually happens in IE. win === win errors out when the window\n    // is from an iframe, and the iframe was removed from the page.\n\n    try {\n        noop(win === win); // eslint-disable-line no-self-compare\n    } catch (err) {\n        return true;\n    }\n\n    // IE orphaned frame\n\n    let iframeIndex = safeIndexOf(iframeWindows, win);\n\n    if (iframeIndex !== -1) {\n        let frame = iframeFrames[iframeIndex];\n\n        if (frame && isFrameWindowClosed(frame)) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction cleanIframes() {\n    for (let i = 0; i < iframeWindows.length; i++) {\n        let closed = false;\n\n        try {\n            closed = iframeWindows[i].closed;\n        } catch (err) {\n            // pass\n        }\n\n        if (closed) {\n            iframeFrames.splice(i, 1);\n            iframeWindows.splice(i, 1);\n        }\n    }\n}\n\nexport function linkFrameWindow(frame : HTMLIFrameElement) {\n\n    cleanIframes();\n\n    if (frame && frame.contentWindow) {\n        try {\n            iframeWindows.push(frame.contentWindow);\n            iframeFrames.push(frame);\n        } catch (err) {\n            // pass\n        }\n    }\n}\n\nexport function getUserAgent(win : ?SameDomainWindowType) : string {\n    win = win || window;\n    return win.navigator.mockUserAgent || win.navigator.userAgent;\n}\n\n\nexport function getFrameByName(win : CrossDomainWindowType, name : string) : ?CrossDomainWindowType {\n\n    let winFrames = getFrames(win);\n\n    for (let childFrame of winFrames) {\n        try {\n            // $FlowFixMe\n            if (isSameDomain(childFrame) && childFrame.name === name && winFrames.indexOf(childFrame) !== -1) {\n                return childFrame;\n            }\n        } catch (err) {\n            // pass\n        }\n    }\n\n    try {\n        // $FlowFixMe\n        if (winFrames.indexOf(win.frames[name]) !== -1) {\n            // $FlowFixMe\n            return win.frames[name];\n        }\n    } catch (err) {\n        // pass\n    }\n\n    try {\n        if (winFrames.indexOf(win[name]) !== -1) {\n            return win[name];\n        }\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function findChildFrameByName(win : CrossDomainWindowType, name : string) : ?CrossDomainWindowType {\n\n    let frame = getFrameByName(win, name);\n\n    if (frame) {\n        return frame;\n    }\n\n    for (let childFrame of getFrames(win)) {\n        let namedFrame = findChildFrameByName(childFrame, name);\n\n        if (namedFrame) {\n            return namedFrame;\n        }\n    }\n}\n\nexport function findFrameByName(win : CrossDomainWindowType, name : string) : ?CrossDomainWindowType {\n\n    let frame;\n\n    frame = getFrameByName(win, name);\n\n    if (frame) {\n        return frame;\n    }\n\n    let top = getTop(win) || win;\n\n    return findChildFrameByName(top, name);\n}\n\nexport function isParent(win : CrossDomainWindowType, frame : CrossDomainWindowType) : boolean {\n\n    let frameParent = getParent(frame);\n\n    if (frameParent) {\n        return frameParent === win;\n    }\n\n    for (let childFrame of getFrames(win)) {\n        if (childFrame === frame) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function isOpener(parent : CrossDomainWindowType, child : CrossDomainWindowType) : boolean {\n\n    return parent === getOpener(child);\n}\n\nexport function getAncestor(win? : CrossDomainWindowType = window) : ?CrossDomainWindowType {\n    win = win || window;\n\n    let opener = getOpener(win);\n\n    if (opener) {\n        return opener;\n    }\n\n    let parent = getParent(win);\n\n    if (parent) {\n        return parent;\n    }\n}\n\nexport function getAncestors(win : CrossDomainWindowType) : Array<CrossDomainWindowType> {\n\n    let results = [];\n\n    let ancestor = win;\n\n    while (ancestor) {\n        ancestor = getAncestor(ancestor);\n        if (ancestor) {\n            results.push(ancestor);\n        }\n    }\n\n    return results;\n}\n\n\nexport function isAncestor(parent : CrossDomainWindowType, child : CrossDomainWindowType) : boolean {\n\n    let actualParent = getAncestor(child);\n\n    if (actualParent) {\n        if (actualParent === parent) {\n            return true;\n        }\n\n        return false;\n    }\n\n    if (child === parent) {\n        return false;\n    }\n\n    if (getTop(child) === child) {\n        return false;\n    }\n\n    for (let frame of getFrames(parent)) {\n        if (frame === child) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport function isPopup(win? : CrossDomainWindowType = window) : boolean {\n    return Boolean(getOpener(win));\n}\n\nexport function isIframe(win? : CrossDomainWindowType = window) : boolean {\n    return Boolean(getParent(win));\n}\n\nexport function isFullpage(win? : CrossDomainWindowType = window) : boolean {\n    return Boolean(!isIframe(win) && !isPopup(win));\n}\n\nfunction anyMatch(collection1, collection2) : boolean {\n\n    for (let item1 of collection1) {\n        for (let item2 of collection2) {\n            if (item1 === item2) {\n                return true;\n            }\n        }\n    }\n\n    return false;\n}\n\nexport function getDistanceFromTop(win : CrossDomainWindowType = window) : number {\n    let distance = 0;\n    let parent = win;\n\n    while (parent) {\n        parent = getParent(parent);\n        if (parent) {\n            distance += 1;\n        }\n    }\n\n    return distance;\n}\n\nexport function getNthParent(win : CrossDomainWindowType, n : number = 1) : ?CrossDomainWindowType {\n    let parent = win;\n\n    for (let i = 0; i < n; i++) {\n        if (!parent) {\n            return;\n        }\n\n        parent = getParent(parent);\n    }\n\n    return parent;\n}\n\nexport function getNthParentFromTop(win : CrossDomainWindowType, n : number = 1) : ?CrossDomainWindowType {\n    return getNthParent(win, getDistanceFromTop(win) - n);\n}\n\nexport function isSameTopWindow(win1 : CrossDomainWindowType, win2 : CrossDomainWindowType) : boolean {\n\n    let top1 = getTop(win1) || win1;\n    let top2 = getTop(win2) || win2;\n\n    try {\n        if (top1 && top2) {\n            if (top1 === top2) {\n                return true;\n            }\n\n            return false;\n        }\n    } catch (err) {\n        // pass\n    }\n\n    let allFrames1 = getAllFramesInWindow(win1);\n    let allFrames2 = getAllFramesInWindow(win2);\n\n    if (anyMatch(allFrames1, allFrames2)) {\n        return true;\n    }\n\n    let opener1 = getOpener(top1);\n    let opener2 = getOpener(top2);\n\n    if (opener1 && anyMatch(getAllFramesInWindow(opener1), allFrames2)) {\n        return false;\n    }\n\n    if (opener2 && anyMatch(getAllFramesInWindow(opener2), allFrames1)) {\n        return false;\n    }\n\n    return false;\n}\n\nexport function matchDomain(pattern : DomainMatcher, origin : DomainMatcher) : boolean {\n\n    if (typeof pattern === 'string') {\n\n        if (typeof origin === 'string') {\n            return pattern === WILDCARD || origin === pattern;\n        }\n\n        if (isRegex(origin)) {\n            return false;\n        }\n\n        if (Array.isArray(origin)) {\n            return false;\n        }\n    }\n\n    if (isRegex(pattern)) {\n\n        if (isRegex(origin)) {\n            return pattern.toString() === origin.toString();\n        }\n\n        if (Array.isArray(origin)) {\n            return false;\n        }\n\n        // $FlowFixMe\n        return Boolean(origin.match(pattern));\n    }\n\n    if (Array.isArray(pattern)) {\n\n        if (Array.isArray(origin)) {\n            return JSON.stringify(pattern) === JSON.stringify(origin);\n        }\n\n        if (isRegex(origin)) {\n            return false;\n        }\n\n        return pattern.some(subpattern => matchDomain(subpattern, origin));\n    }\n\n    return false;\n}\n\nexport function stringifyDomainPattern(pattern : DomainMatcher) : string {\n    if (Array.isArray(pattern)) {\n        return `(${ pattern.join(' | ') })`;\n    } else if (isRegex(pattern)) {\n        return `RegExp(${ pattern.toString() }`;\n    } else {\n        return pattern.toString();\n    }\n}\n\nexport function getDomainFromUrl(url : string) : string {\n\n    let domain;\n\n    if (url.match(/^(https?|mock|file):\\/\\//)) {\n        domain = url;\n    } else {\n        return getDomain();\n    }\n\n    domain = domain.split('/').slice(0, 3).join('/');\n\n    return domain;\n}\n\nexport function onCloseWindow(win : CrossDomainWindowType, callback : Function, delay : number = 1000, maxtime : number = Infinity) : { cancel : () => void } {\n\n    let timeout;\n\n    let check = () => {\n\n        if (isWindowClosed(win)) {\n\n            if (timeout) {\n                clearTimeout(timeout);\n            }\n\n            return callback();\n        }\n\n        if (maxtime <= 0) {\n            clearTimeout(timeout);\n        } else {\n            maxtime -= delay;\n            timeout = setTimeout(check, delay);\n        }\n    };\n\n    check();\n\n    return {\n        cancel() {\n            if (timeout) {\n                clearTimeout(timeout);\n            }\n        }\n    };\n}\n\n// eslint-disable-next-line complexity\nexport function isWindow(obj : Object) : boolean {\n\n    try {\n        if (obj === window) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (Object.prototype.toString.call(obj) === '[object Window]') {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (window.Window && obj instanceof window.Window) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (obj && obj.self === obj) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (obj && obj.parent === obj) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (obj && obj.top === obj) {\n            return true;\n        }\n    } catch (err) {\n        if (err && err.message === IE_WIN_ACCESS_ERROR) {\n            return true;\n        }\n    }\n\n    try {\n        if (noop(obj === obj) === '__unlikely_value__') { // eslint-disable-line no-self-compare\n            return false;\n        }\n\n    } catch (err) {\n        return true;\n    }\n\n    try {\n        if (obj && obj.__cross_domain_utils_window_check__ === '__unlikely_value__') {\n            return false;\n        }\n\n    } catch (err) {\n        return true;\n    }\n\n    return false;\n}\n\nexport function isBrowser() : boolean {\n    return (typeof window !== 'undefined' && typeof window.location !== 'undefined');\n}\n\nexport function isCurrentDomain(domain : string) : boolean {\n    if (!isBrowser()) {\n        return false;\n    }\n\n    return (getDomain() === domain);\n}\n\nexport function isMockDomain(domain : string) : boolean {\n    return domain.indexOf(PROTOCOL.MOCK) === 0;\n}\n\nexport function normalizeMockUrl(url : string) : string {\n    if (!isMockDomain(getDomainFromUrl(url))) {\n        return url;\n    }\n\n    if (!__TEST__) {\n        throw new Error(`Mock urls not supported out of test mode`);\n    }\n\n    return url.replace(/^mock:\\/\\/[^/]+/, getActualDomain(window));\n}\n\nexport function closeWindow(win : CrossDomainWindowType) {\n    try {\n        win.close();\n    } catch (err) {\n        // pass\n    }\n}\n\nexport function getFrameForWindow(win : CrossDomainWindowType) : ?HTMLElement {\n    if (isSameDomain(win)) {\n        return assertSameDomain(win).frameElement;\n    }\n\n    for (const frame of document.querySelectorAll('iframe')) {\n        if (frame && frame.contentWindow && frame.contentWindow === win) {\n            return frame;\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","/* @flow */\n\nexport * from './utils';\nexport * from './types';\nexport * from './constants';\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/* @flow */\n\n// export something to force webpack to see this as an ES module\nexport const TYPES = true;\n\nexport type CrossDomainLocationType = {|\n\n|};\n\nexport type CrossDomainWindowType = {|\n    location : string | CrossDomainLocationType,\n    self : CrossDomainWindowType,\n    closed : boolean,\n    open : (string, string, string) => CrossDomainWindowType,\n    close : () => void,\n    focus : () => void,\n    top : CrossDomainWindowType,\n    frames : Array<CrossDomainWindowType>,\n    opener ? : CrossDomainWindowType,\n    parent : CrossDomainWindowType,\n    length : number,\n    postMessage : (string, string) => void\n|};\n\nexport type SameDomainWindowType = Object & {\n    location : string | Object,\n    self : CrossDomainWindowType,\n    closed : boolean,\n    open : (string, string, string) => CrossDomainWindowType,\n    close : () => void,\n    focus : () => void,\n    XMLHttpRequest : typeof XMLHttpRequest,\n    document : Document,\n    navigator : {\n        userAgent : string,\n        mockUserAgent? : string\n    }\n};\n\nexport type DomainMatcher = string | Array<string> | $ReadOnlyArray<string> | RegExp;\n\n\n\n// WEBPACK FOOTER //\n// ./src/types.js"],"sourceRoot":""}